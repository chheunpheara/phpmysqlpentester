<?php

namespace model;


use config;


class ProductModel extends \config\Database {
    public function __construct() {
        parent::__construct();
    }

    public function getProducts() {
        $q = $this->db->prepare('SELECT * FROM products ORDER BY title ASC');
        $q->execute();
        return $q->fetchAll(\PDO::FETCH_OBJ);
    }

    public function getProduct($id, bool $usePrepareStatement = false): object {
        if ($usePrepareStatement) {
            $q = $this->db->prepare('SELECT * FROM products WHERE id = :id');
            $q->bindParam(':id', $id);
        } else {
            $str = 'SELECT * FROM products WHERE id = ' . $id;

            $q = $this->db->query($str);
        }

        $q->execute();
        $r = $q->fetch(\PDO::FETCH_OBJ);
        if (! \is_object($r)) {
            die('NO data found');
        }
        return $r;
    }
}